<!DOCTYPE html>
<html >
<head>
    
    <title>View Announcements</title>
</head>
<body>
    <h1>View Announcements</h1>
    <p1 id="firstname"></p1>
    <table>
           <thead>
                 <th>Title</th>
                 <th>Description</th>
                 <th>Posted by</th>
           </thead>
           <tbody id="tbody1">
             
           </tbody>
         
    </table>
   
  
    <script src="https://www.gstatic.com/firebasejs/5.10.1/firebase.js"></script>
    
    
    <script>
    // Your web app's Firebase configuration
   
    var firebaseConfig = {
    apiKey: "AIzaSyCoXqBGvYHP2wcXLGnu8iR1DHY13An13Vo",
    authDomain: "eresapplication.firebaseapp.com",
    databaseURL: "https://eresapplication-default-rtdb.firebaseio.com",
    projectId: "eresapplication",
    storageBucket: "eresapplication.appspot.com",
    messagingSenderId: "930888883325",
    appId: "1:930888883325:web:c8ca7e2c05070ee346e514",
  
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);

    function GetAllData(){

      

        firebase.database().ref('Announcements').once('value',
       function(AllRecords){
       AllRecords.forEach(
           function(CurrentRecord){
              var Title = CurrentRecord.val().title;
              var Description = CurrentRecord.val().description;
              var Firstname = CurrentRecord.val().firstname;
              var Surname = CurrentRecord.val().surname;
              var user = Firstname+" "+Surname;

              AddAnnouncementsToTable(Title,Description,user)
           }
       );
       });
    }

    

    window.onload= GetAllData;
    
    var annNo = 0;
    function AddAnnouncementsToTable(Title,Description,user){
        var tbody = document.getElementById('tbody1');
        var  trow = document.createElement('tr');
        var  td1 = document.createElement('td');
        var  td2 = document.createElement('td');
        var  td3 = document.createElement('td');
        var  btn = document.createElement('button');
        
        td1.innerHTML= ++annNo;
        td1.innerHTML= Title;
        td2.innerHTML= Description;
        td3.innerHTML= user; 
        trow.appendChild(td1); 
        trow.appendChild(td2);
        trow.appendChild(td3);
        tbody.appendChild(trow);
        tbody.appendChild(btn);

    }

    </script>
   <script type="text/javascript">
    var userId=localStorage.getItem('id');
    firebase.database().ref('User/'+userId).once('value').then(
            function(snapshot){
           var firstname=(snapshot.val() && snapshot.val().Firstname);
           var surname=(snapshot.val() && snapshot.val().Surname);

           document.getElementById('firstname').innerHTML=firstname;
           document.getElementById('surname').innerHTML=surname;

            });
 </script>
    
</body>
</html>